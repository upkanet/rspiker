<html>

<head>
    <title>Axorus - Spiker</title>
</head>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-dark-5@1.1.0/dist/css/bootstrap-dark.min.css" integrity="sha256-kbkRO+z3M7RfAEv8nS4CXvEWInRxgMkPycqEr+QW0+0=" crossorigin="anonymous">
<script src="js/jquery3.5.1.min.js"></script>
<script src="js/plotly-latest.min.js"></script>
<script src="js/main.js"></script>
<style>
    .tab{
        display: none;
        height:calc(100% - 120px);
    }

    .tab-active{
        display: block;
    }

    .nav-link{
        cursor: pointer;
    }

    .e-tile{
        /*border: 1px solid black;*/
        height: calc(85vh/16);
    }

    [data-e]::before{
        content: attr(data-e) " ";
        position: absolute;
        z-index: 100;
        font-size: smaller;
    }

    #slider{
        margin-top: 10px;
    }

    #data-progress{
        background-color: #375a7f;
        height:5px;
        position: fixed;
        width:100%;
        bottom:0px;
    }

    .el-grid{
        display: grid;
        grid-template-columns: repeat(16, 1fr);
        margin-left: 20px;
        margin-right: 20px;
        height:100%;
    }

    #home-grid{
        display: grid;
        grid-template-columns: 1fr 1fr;
        margin-left: 30px;
        margin-right: 30px;
    }

    #home-grid>button{
        margin: 5px;
        height: 200px;
    }

    .test{
        border: 1px solid red;
        height: 50px;
    }
</style>

<body>
    <div id="data-progress" style="display: none;"></div>
    <ul class="nav nav-tabs nav-justified">
        <li class="nav-item">
            <a class="nav-link active" data-tab="home" onclick="javascript:tshow(this);">Home</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-tab="raw" onclick="javascript:tshow(this);">Raw</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-tab="filtered" onclick="javascript:tshow(this);">Filtered</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-tab="raster" onclick="javascript:tshow(this);">Rasterplot</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-tab="heatmap" onclick="javascript:tshow(this);">Heatmap</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-tab="config" onclick="javascript:tshow(this);">Config</a>
        </li>
    </ul>
    <div class="container">
        <div class="row">
            <div class="col-9">
                <input id="slider" type="range" class="form-range" min="0" max="5" value="0" onchange="updateSlider()">
            </div>
            <div class="col-3">
                <div class="input-group">
                    <input id="time" type="text" class="form-control form-control-sm" value="0.0 sec" disabled>
                    <div class="input-group-text">
                        Spikes&nbsp;
                        <input id="spike-layer" class="form-check-input mt-0" type="checkbox" value="">
                    </div>
                    <button type="button" class="btn btn-primary" onclick="select_el();">Electrode #</button>
                </div>
            </div>
        </div>
    </div>
    <div class="tab tab-active" id="home">
        <div id="home-grid">
            <button type="button" class="btn btn-primary" data-tab="raw" onclick="javascript:tshow(this);">Raw</button>
            <button type="button" class="btn btn-primary" data-tab="filtered" onclick="javascript:tshow(this);">Filtered</button>
            <button type="button" class="btn btn-primary" data-tab="raster" onclick="javascript:tshow(this);">Rasterplot</button>
            <button type="button" class="btn btn-primary" data-tab="heatmap" onclick="javascript:tshow(this);">Heatmap</button>
            <button type="button" class="btn btn-primary" data-tab="config" onclick="javascript:tshow(this);">Config</button>
        </div>
    </div>
    <div class="tab" id="raw"></div>
    <div class="tab" id="raw_el">
        <div id="g-raw-el" style="width:100%;height:calc(100% - 150px);" onclick="show('raw')"></div>
        <div class="container">
            <div class="row  justify-content-md-center">
                <div class="col col-lg-2">
                    <button class="btn btn-primary" onclick="plotEspectrum()">Spectrum</button>
                </div>
            </div>
        </div>
        <div id="g-spectrum-el" style="width:100%;height:calc(100% - 150px);"></div>
    </div>
    <div class="tab" id="filtered"></div>
    <div class="tab" id="filtered_el">
        <div id="g-filtered-el" style="width:100%;height:calc(100% - 150px);" onclick="show('filtered')"></div>
    </div>
    <div class="tab" id="raster"></div>
    <div class="tab" id="raster_el">
        <div class="container">
            <div id="g-raster-el" style="width:100%;height:calc(100% - 200px);" onclick="show('raster')"></div>
            <div class="input-group mb-3">
                <input type="number" class ="form-control form-control-lg" id="stack-width" value="0.01" min="0" max="1" step="0.005">
                <button type="button" class="btn btn-lg btn-outline-primary">seconds</button>
                <button type="button" class="btn btn-lg btn-primary" onclick="plotEstack()">Stack</button>
            </div>
            <div id="g-stack-el" style="width:100%;height:calc(100% - 200px); display:none;" onclick="$(this).hide()"></div>
        </div>
    </div>
    <div class="tab" id="heatmap">
        <div class="container">
            <div class="row">
                <div class="col-8">
                    <input id="microslider" type="range" class="form-range" min="0" max="5" value="0" onchange="updateMicroSlider()">
                </div>
                <div class="col-4">
                    <div class="input-group">
                        <button type="button" class="btn btn-secondary" onclick="microSliderDown()">&lt;</button>
                        <button type="button" class="btn btn-secondary" onclick="setMicroSlider()">Stim Start</button>
                        <input id="heatmap-ms" type="text" class="form-control form-control-sm" disabled>
                        <button type="button" class="btn btn-secondary" onclick="microSliderUp()">&gt;</button>
                      </div>
                </div>
            </div>
        </div>
    </div>
    <div class="tab" id="config">
        <div class="container">
            <h2>
                Config
            </h2>
            <div class="container">
                <div class="row  justify-content-md-center">
                    <div class="col col-lg-6">
                        <div class="accordion">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#config-params">
                                        Parameters
                                    </button>
                                </h2>
                            </div>
                            <div id="config-params" class="accordion-collapse collapse show">
                                <div class="accordion-body">
                                    <div class="input-group input-group-sm mb-3">
                                        <span class="input-group-text">Stimulation Duration</span>
                                        <input id="stimduration" class="form-control" type="number" value="0" min="0" max="2000">
                                        <span class="input-group-text">ms</span>
                                    </div>
                                    <div class="input-group input-group-sm mb-3">
                                        <span class="input-group-text">Threshold</span>
                                        <input id="threshold" class="form-control" type="number" value="0" min="0" max="10">
                                        <span class="input-group-text">x std dev&nbsp;<i>(0 for auto)</i></span>
                                    </div>
                                    <div class="input-group input-group-sm mb-3">
                                        <span class="input-group-text">Timewidth</span>
                                        <input id="timewidth" class="form-control" type="number" value="0" min="0" max="10">
                                        <span class="input-group-text">sec</span>
                                    </div>
                                    <div class="input-group input-group-sm mb-3">
                                        <span class="input-group-text">Filter&nbsp;<i>fc</i></span>
                                        <input id="filterfc" class="form-control" type="number" value="0" min="0" max="2000">
                                        <span class="input-group-text">Hz</span>
                                    </div>
                                    <button class="btn btn-primary" onclick="saveConfig();">Save</button>
                                    <button class="btn btn-secondary" onclick="loadConfig();">Default</button>
                                    <input id="map_mea" type="hidden" value="">
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#file-params">
                                        File Parameters
                                    </button>
                                </h2>
                            </div>
                            <div id="file-params" class="accordion-collapse collapse show">
                                <div class="accordion-body">
                                    <div class="input-group input-group-sm mb-3">
                                        <span class="input-group-text">Sample Rate</span>
                                        <input id="samplerate" class="form-control" type="number" value="0" min="0" max="100000" disabled>
                                        <span class="input-group-text">Hz</span>
                                    </div>
                                    <div class="input-group input-group-sm mb-3">
                                        <span class="input-group-text">Stimulation Start</span>
                                        <input id="stimstart" class="form-control" type="number" value="0" min="0" max="10" disabled>
                                        <span class="input-group-text">sec</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
    </div>
    <div id="g-test" style="width:100%;height:calc(100% - 200px); display:none;"></div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>
</body>

</html>